# 问题收集与解决方案模板

本文件用于暂存移植过程中遇到的问题和解决方案，待验证后添加到 SKILL.md。

## 使用方法

1. 移植过程中遇到重大问题时，记录在下方
2. 评估是否需要添加到 SKILL.md 的"关键注意事项"
3. 验证解决方案后，更新 SKILL.md
4. 归档或清空已处理的条目

---

## 待处理问题

### 问题 #1: [问题简要描述]

**日期：** YYYY-MM-DD  
**项目：** [移植的库名称]  
**分类：** [ ] 编译错误 [ ] 运行时错误 [ ] 配置问题 [ ] API 差异  
**优先级：** [ ] 阻塞 [ ] 重要 [ ] 一般  

**问题描述：**
（详细描述问题现象）

**错误信息：**
```
（粘贴完整的错误信息）
```

**复现步骤：**
1. 
2. 
3. 

**根本原因：**
（分析问题的深层原因）

**解决方案：**
```code
（粘贴解决方案的完整代码）
```

**验证方法：**
- [ ] 编译通过
- [ ] 运行无错误
- [ ] 功能正常

**是否需要更新 SKILL：**
- [ ] 是 → 目标位置：`SKILL.md` 的"_________"部分
- [ ] 否 → 原因：_________

**相关 API/模块：**
- 

**参考资料：**
- 

---

### 问题 #2: [下一个问题]

（重复上述模板）

---

## 已解决问题（已添加到 SKILL）

归档已处理的问题，便于未来参考。

### ✅ [问题简要描述]

**添加日期：** YYYY-MM-DD  
**SKILL 位置：** `SKILL.md` 第 N 节  
**简要说明：** 一句话概括问题和解决方案  

---

## 评估标准

判断是否需要添加到 SKILL.md：

### ✅ 应该添加（满足以下条件）

- [ ] **阻塞性**：导致编译失败或运行时 crash
- [ ] **未覆盖**：现有 SKILL.md 未提及或覆盖不足
- [ ] **通用性**：可能在其他移植项目中再次出现
- [ ] **非显而易见**：错误信息不能直接指向原因

### ❌ 不需要添加（符合以下情况）

- [ ] 简单的语法错误（拼写错误、缺少分号等）
- [ ] 一次性的特定项目问题
- [ ] 已在 SKILL.md 中详细说明
- [ ] 可以通过搜索错误信息直接解决

---

## 更新到 SKILL.md 的格式

完整的格式参见 [EVOLUTION.md](EVOLUTION.md)，这里是简化版：

```markdown
### N. **问题简要描述（分类标签）**

**问题：** 具体描述问题现象和影响

**典型错误：**（可选）
\```
错误信息示例
\```

**原因：** 深层次原因分析

**解决方案：** 分步骤的详细解决方法

**❌ 错误写法：**
\```code
错误示例代码
\```

**✅ 正确写法：**
\```code
正确示例代码
\```

**检查清单：**
- [ ] 验证点1
- [ ] 验证点2
```

---

## 快速记录模板（移植过程中快速记录）

```
问题：
原因：
解决：
验证：✅/❌
需要更新 SKILL：是/否
```

---

## 附加信息

### 常见分类标签

编译相关：
- `[编译错误]` - 编译阶段错误
- `[链接错误]` - 链接阶段错误
- `[类型错误]` - 类型不匹配

运行时相关：
- `[运行时错误]` - 运行时 crash 或异常
- `[找不到模块]` - 导入/加载模块失败
- `[函数未定义]` - 函数调用失败

配置相关：
- `[配置错误]` - JSON5/CMake 配置错误
- `[模块配置]` - module.json5 相关
- `[构建配置]` - build-profile.json5 相关

API 相关：
- `[API 差异]` - Android 与 OH API 行为差异
- `[API 缺失]` - OH 缺少对应 API
- `[NAPI]` - Native 模块相关

### 错误信息关键词索引

建立错误信息与解决方案的快速索引：

| 错误信息关键词 | 对应问题 | SKILL 位置 |
|--------------|---------|-----------|
| `Cannot find function` | Native 模块导出方式错误 | 关键注意事项 §3 |
| `module name ... must be same` | 模块名不一致 | 关键注意事项 §4 |
| `Declared function has no native implementation` | .d.ts 类型声明错误 | 关键注意事项 §3 |
| （待添加） | | |

---

## 定期回顾

建议每完成 1-2 个移植项目后：

1. **Review 本文件的所有问题**
   - 评估是否需要添加到 SKILL
   - 合并相似问题

2. **更新 SKILL.md**
   - 批量添加新的注意事项
   - 更新现有章节

3. **清理本文件**
   - 归档已处理问题
   - 清空待处理列表
